<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ê²½í—˜ ì—…ë¡œë“œí•˜ê³  ëˆ ë²Œê¸° | Trex.so</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
<style>
@import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@300;400;600;700&display=swap');
body { font-family: 'Pretendard', sans-serif; }
.gradient-text {
background: linear-gradient(90deg, #3b82f6, #8b5cf6, #ec4899);
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
}
</style>
</head>
<body class="bg-gray-50 text-gray-800">

<!-- Navigation -->
<nav class="fixed w-full bg-white/90 backdrop-blur-md z-50 border-b border-gray-100 shadow-sm">
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
<div class="flex justify-between items-center h-16">
<div class="flex items-center">
<a href="index.html" class="text-2xl font-bold text-blue-600"><i class="fa-solid fa-cube mr-2"></i>Trex.so</a>
</div>
<div class="hidden md:flex space-x-8">
<a href="index.html" class="text-gray-600 hover:text-blue-600 font-medium">í™ˆ</a>
<a href="upload.html" class="text-blue-600 font-semibold">ê²½í—˜ ì—…ë¡œë“œ</a>
<a href="market.html" class="text-gray-600 hover:text-blue-600 font-medium">ë¸”ë¡ ë§ˆì¼“</a>
</div>
<div id="authButtons">
<!-- ë¡œê·¸ì¸ í›„ í‘œì‹œ -->
</div>
</div>
</div>
</nav>

<!-- Hero Section -->
<section class="pt-24 pb-12 bg-gradient-to-br from-blue-50 to-purple-50">
<div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
<div class="inline-block bg-blue-100 text-blue-600 px-4 py-2 rounded-full text-sm font-semibold mb-4">
<i class="fa-solid fa-coins mr-2"></i>í¬ë¦¬ì—ì´í„° ìˆ˜ìµ ì°½ì¶œ
</div>
<h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-6">
ë‹¹ì‹ ì˜ ê²½í—˜ì„<br><span class="gradient-text">ìˆ˜ìµí˜• ë¸”ë¡ìœ¼ë¡œ ë§Œë“œì„¸ìš”</span>
</h1>
<p class="text-xl text-gray-600 mb-8">
ì‚¬ì§„ê³¼ ê°„ë‹¨í•œ ì„¤ëª…ë§Œ ìˆìœ¼ë©´ ë©ë‹ˆë‹¤. AIê°€ ìë™ìœ¼ë¡œ ë¶„ì„í•˜ì—¬<br>
ì „ ì„¸ê³„ ì—¬í–‰ìë“¤ì´ êµ¬ë§¤í•  ìˆ˜ ìˆëŠ” ì—¬í–‰ ë¸”ë¡ìœ¼ë¡œ ë³€í™˜í•´ ë“œë¦½ë‹ˆë‹¤.
</p>
</div>
</section>

<!-- Upload Form -->
<section class="py-12 pb-20 bg-white">
<div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
<div class="grid md:grid-cols-2 gap-8">
<!-- ì´ë¯¸ì§€ ì—…ë¡œë“œ -->
<div>
<div class="bg-white rounded-2xl shadow-xl p-8 border border-gray-100">
<h3 class="text-xl font-bold text-gray-900 mb-6 flex items-center gap-3">
<i class="fa-solid fa-image text-blue-600"></i>ì—¬í–‰ ì‚¬ì§„ ì—…ë¡œë“œ
</h3>
<div class="upload-zone border-2 border-dashed border-blue-200 rounded-xl p-8 text-center cursor-pointer transition hover:border-blue-400 hover:bg-blue-50" 
id="uploadZone" 
onclick="document.getElementById('fileInput').click()">
<div class="upload-icon w-16 h-16 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mx-auto mb-4 text-3xl">
<i class="fa-solid fa-camera"></i>
</div>
<div class="upload-text">
<p class="font-semibold text-gray-900 mb-2">ì‚¬ì§„ì„ ì—…ë¡œë“œí•˜ì„¸ìš”</p>
<p class="text-sm text-gray-500">í´ë¦­í•˜ê±°ë‚˜ ë“œë˜ê·¸í•˜ì—¬ ì‚¬ì§„ ì¶”ê°€</p>
<p class="text-xs text-gray-400 mt-2">JPG, PNG ìµœëŒ€ 5MB</p>
</div>
</div>
<input type="file" id="fileInput" accept="image/*" class="hidden" onchange="handleImageUpload(event)">
</div>

<!-- AI ë¶„ì„ ê²°ê³¼ -->
<div class="ai-result bg-white rounded-2xl shadow-xl p-8 border border-green-200 mt-6" id="aiResult" style="display:none;">
<div class="flex items-center gap-2 mb-4 text-green-600">
<i class="fa-solid fa-check-circle text-xl"></i>
<h4 class="font-bold text-lg">AI ë¶„ì„ ì™„ë£Œ</h4>
</div>
<div class="space-y-3" id="blockPreview"></div>
<div class="flex flex-wrap gap-2 mt-4" id="tagsDisplay"></div>
</div>
</div>

<!-- í…ìŠ¤íŠ¸ ì…ë ¥ í¼ -->
<div>
<div class="bg-white rounded-2xl shadow-xl p-8 border border-gray-100">
<h3 class="text-xl font-bold text-gray-900 mb-6 flex items-center gap-3">
<i class="fa-solid fa-pen-to-square text-purple-600"></i>ê²½í—˜ ê¸°ë¡í•˜ê¸°
</h3>

<div class="mb-4">
<label class="block text-sm font-semibold text-gray-700 mb-2">ë‚´ ë‹‰ë„¤ì„</label>
<input type="text" id="creatorName" placeholder="ì˜ˆ: ì„œìš¸ë¡œì»¬ëŸ¬ë²„" value="ì—¬í–‰ì"
class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent">
</div>

<div class="mb-6">
<label class="block text-sm font-semibold text-gray-700 mb-2">ì—¬í–‰ ê²½í—˜ ì„¤ëª… *</label>
<textarea id="travelText" rows="8"
class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"
placeholder="ì´ ì¥ì†Œì—ì„œ ì–´ë–¤ ê²½í—˜ì„ í–ˆë‚˜ìš”? ê°ì„±ì ìœ¼ë¡œ ì¨ì£¼ì„¸ìš”. AIê°€ ë¶„ì„í•´ì„œ ìë™ìœ¼ë¡œ ë¸”ë¡ ì •ë³´ë¥¼ ì±„ì›Œë“œë ¤ìš”.

ì˜ˆì‹œ: 'ë¹„ ì˜¤ëŠ” ì„±ìˆ˜ë™, ìˆ¨ì–´ìˆëŠ” ì¹´í˜ë¥¼ ë°œê²¬í–ˆë‹¤. ì›¨ì´íŒ… 30ë¶„ë„ ì•„ê¹ì§€ ì•Šì€ ì°½ê°€ ë¶„ìœ„ê¸°. ë¼ë–¼ í•œ ì”ì— í”¼ë¡œê°€ ë…¹ëŠ” ê¸°ë¶„...'"></textarea>
</div>

<button class="w-full bg-blue-600 text-white px-8 py-4 rounded-full text-lg font-bold hover:bg-blue-700 transition shadow-lg flex items-center justify-center gap-2" 
id="analyzeBtn" onclick="analyzeBlock()">
<i class="fa-solid fa-wand-magic-sparkles"></i>
AIë¡œ ë¸”ë¡ ìƒì„±í•˜ê¸°
</button>

<div id="publishArea" style="display:none; margin-top:16px;">
<button class="w-full bg-green-600 text-white px-8 py-4 rounded-full text-lg font-bold hover:bg-green-700 transition shadow-lg flex items-center justify-center gap-2" 
onclick="publishBlock()">
<i class="fa-solid fa-rocket"></i>
ë§ˆì¼“ì— ë¸”ë¡ ë“±ë¡í•˜ê¸°
</button>
</div>
</div>

<!-- í˜œíƒ ì•ˆë‚´ -->
<div class="bg-gradient-to-br from-blue-50 to-purple-50 rounded-2xl p-6 mt-6 border border-blue-100">
<h4 class="font-bold text-gray-900 mb-4 flex items-center gap-2">
<i class="fa-solid fa-gift text-blue-600"></i>
í¬ë¦¬ì—ì´í„° í˜œíƒ
</h4>
<div class="space-y-3">
<div class="flex items-start gap-3">
<i class="fa-solid fa-check-circle text-green-500 mt-1"></i>
<div>
<p class="font-semibold text-gray-900">ë‚®ì€ ìˆ˜ìˆ˜ë£Œ</p>
<p class="text-sm text-gray-600">íŒë§¤ ìˆ˜ìµì˜ 80%ë¥¼ í¬ë¦¬ì—ì´í„°ê°€ ê°€ì ¸ê°‘ë‹ˆë‹¤</p>
</div>
</div>
<div class="flex items-start gap-3">
<i class="fa-solid fa-check-circle text-green-500 mt-1"></i>
<div>
<p class="font-semibold text-gray-900">ê¸€ë¡œë²Œ íŒë§¤</p>
<p class="text-sm text-gray-600">ìë™ ë‹¤êµ­ì–´ ë²ˆì—­ìœ¼ë¡œ ì „ ì„¸ê³„ ë…¸ì¶œ</p>
</div>
</div>
<div class="flex items-start gap-3">
<i class="fa-solid fa-check-circle text-green-500 mt-1"></i>
<div>
<p class="font-semibold text-gray-900">AI ìë™í™”</p>
<p class="text-sm text-gray-600">ì‚¬ì§„ê³¼ í…ìŠ¤íŠ¸ë§Œìœ¼ë¡œ ì™„ì„±</p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</section>

<!-- AI ë¶„ì„ ë¡œë”© ì˜¤ë²„ë ˆì´ -->
<div class="fixed inset-0 bg-black bg-opacity-50 z-[100] items-center justify-center backdrop-blur-sm" id="aiOverlay" style="display:none;">
<div class="bg-white rounded-2xl p-8 max-w-md mx-4 text-center">
<div class="w-20 h-20 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin mx-auto mb-6"></div>
<h3 class="text-2xl font-bold text-gray-900 mb-2">AI ë¶„ì„ ì¤‘...</h3>
<p class="text-gray-600 mb-6">ë©€í‹°ëª¨ë‹¬ AIê°€ ì—¬í–‰ ê²½í—˜ì„ ë¶„ì„í•©ë‹ˆë‹¤</p>
<div class="space-y-3 text-left">
<div class="flex items-center gap-3 p-3 bg-gray-50 rounded-lg transition-all" id="step1">
<i class="fa-solid fa-image text-blue-600"></i>
<span class="text-sm text-gray-700">ì´ë¯¸ì§€ ì‹œê° ë°ì´í„° ì¶”ì¶œ</span>
</div>
<div class="flex items-center gap-3 p-3 bg-gray-50 rounded-lg opacity-40 transition-all" id="step2">
<i class="fa-solid fa-brain text-purple-600"></i>
<span class="text-sm text-gray-700">í…ìŠ¤íŠ¸ ê°ì„± ë¶„ì„ (NLP)</span>
</div>
<div class="flex items-center gap-3 p-3 bg-gray-50 rounded-lg opacity-40 transition-all" id="step3">
<i class="fa-solid fa-location-dot text-green-600"></i>
<span class="text-sm text-gray-700">ìœ„ì¹˜ ë°ì´í„° êµ¬ì¡°í™”</span>
</div>
<div class="flex items-center gap-3 p-3 bg-gray-50 rounded-lg opacity-40 transition-all" id="step4">
<i class="fa-solid fa-cube text-pink-600"></i>
<span class="text-sm text-gray-700">ë¸”ë¡ JSON ìƒì„±</span>
</div>
</div>
</div>
</div>

<!-- í† ìŠ¤íŠ¸ ì•Œë¦¼ -->
<div class="fixed bottom-6 right-6 z-50 space-y-3" id="toastContainer"></div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  BlockTrip Upload Page
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const STATE = {
  uploadedImage: null,
  pendingBlock: null,
  userId: 'user_' + Math.random().toString(36).substring(2, 10)
};

// ì´ë¯¸ì§€ ì—…ë¡œë“œ
function handleImageUpload(event) {
  const file = event.target.files[0];
  if (!file) return;
  if (file.size > 5 * 1024 * 1024) {
    showToast('ì´ë¯¸ì§€ í¬ê¸°ëŠ” 5MB ì´í•˜ì—¬ì•¼ í•´ìš”', 'error');
    return;
  }

  const reader = new FileReader();
  reader.onload = (e) => {
    STATE.uploadedImage = e.target.result;
    const zone = document.getElementById('uploadZone');
    zone.innerHTML = `<img src="${e.target.result}" alt="ì—…ë¡œë“œëœ ì´ë¯¸ì§€" class="w-full h-64 object-cover rounded-lg">`;
    zone.classList.add('border-green-400', 'bg-green-50');
    zone.classList.remove('border-blue-200');
    showToast('ì´ë¯¸ì§€ ì—…ë¡œë“œ ì™„ë£Œ!', 'success');
  };
  reader.readAsDataURL(file);
}

// ë“œë˜ê·¸ ì•¤ ë“œë¡­
const uploadZone = document.getElementById('uploadZone');
uploadZone.addEventListener('dragover', e => { 
  e.preventDefault(); 
  uploadZone.classList.add('border-blue-600', 'bg-blue-100');
});

uploadZone.addEventListener('dragleave', () => { 
  uploadZone.classList.remove('border-blue-600', 'bg-blue-100');
});

uploadZone.addEventListener('drop', e => {
  e.preventDefault();
  uploadZone.classList.remove('border-blue-600', 'bg-blue-100');
  const file = e.dataTransfer.files[0];
  if (file && file.type.startsWith('image/')) {
    const dt = new DataTransfer();
    dt.items.add(file);
    document.getElementById('fileInput').files = dt.files;
    handleImageUpload({ target: { files: [file] } });
  }
});

// AI ë¸”ë¡ ë¶„ì„
async function analyzeBlock() {
  const text = document.getElementById('travelText').value.trim();
  if (!text && !STATE.uploadedImage) {
    showToast('í…ìŠ¤íŠ¸ ë˜ëŠ” ì´ë¯¸ì§€ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”', 'error');
    return;
  }

  showAIOverlay();

  const creatorName = document.getElementById('creatorName').value || 'ì—¬í–‰ì';

  setTimeout(() => {
    const result = getMockAnalysis(text, creatorName);
    hideAIOverlay();

    if (result.success) {
      STATE.pendingBlock = result.block;
      showBlockPreview(result.block);
      document.getElementById('publishArea').style.display = 'block';
      showToast('âœ¨ AI ë¶„ì„ ì™„ë£Œ! ë¸”ë¡ì„ í™•ì¸í•˜ì„¸ìš”', 'success');
    } else {
      showToast('ë¶„ì„ ì¤‘ ì˜¤ë¥˜: ' + result.error, 'error');
    }
  }, 3000);
}

function showAIOverlay() {
  document.getElementById('aiOverlay').style.display = 'flex';
  const steps = ['step1','step2','step3','step4'];
  steps.forEach((s, i) => {
    setTimeout(() => {
      const elem = document.getElementById(s);
      elem.classList.remove('opacity-40');
      elem.classList.add('bg-blue-50', 'border', 'border-blue-200');
    }, i * 700);
  });
}

function hideAIOverlay() {
  document.getElementById('aiOverlay').style.display = 'none';
  ['step1','step2','step3','step4'].forEach(s => {
    const elem = document.getElementById(s);
    elem.classList.add('opacity-40');
    elem.classList.remove('bg-blue-50', 'border', 'border-blue-200');
  });
}

function showBlockPreview(block) {
  const preview = document.getElementById('blockPreview');
  preview.innerHTML = `
    <div class="grid grid-cols-2 gap-3">
      <div>
        <p class="text-xs text-gray-500 mb-1">ë¸”ë¡ ì œëª©</p>
        <p class="font-semibold text-gray-900">${block.title}</p>
      </div>
      <div>
        <p class="text-xs text-gray-500 mb-1">ì¹´í…Œê³ ë¦¬</p>
        <p class="font-semibold text-gray-900">${block.category}</p>
      </div>
      <div>
        <p class="text-xs text-gray-500 mb-1">ìœ„ì¹˜</p>
        <p class="font-semibold text-gray-900">${block.location}</p>
      </div>
      <div>
        <p class="text-xs text-gray-500 mb-1">íŒë§¤ ê°€ê²©</p>
        <p class="font-bold text-blue-600 text-lg">$${parseFloat(block.price).toFixed(2)}</p>
      </div>
    </div>
    <div class="mt-4">
      <p class="text-xs text-gray-500 mb-1">AI ë¶„ì„ ì„¤ëª…</p>
      <p class="text-sm text-gray-700 leading-relaxed">${block.description}</p>
    </div>
  `;

  const tags = Array.isArray(block.tags) ? block.tags : (block.tags||'').split(',');
  document.getElementById('tagsDisplay').innerHTML = tags.filter(t=>t).map(t => 
    `<span class="px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-semibold">#${t.trim()}</span>`
  ).join('');

  document.getElementById('aiResult').style.display = 'block';
}

// ë¸”ë¡ ë§ˆì¼“ ë“±ë¡
async function publishBlock() {
  if (!STATE.pendingBlock) return;

  showToast('ğŸš€ ë¸”ë¡ ë“±ë¡ ì¤‘...', 'success');

  try {
    // tags ì•ˆì „í•˜ê²Œ ë°°ì—´ë¡œ ë³€í™˜
    let tagsArray = [];
    if (STATE.pendingBlock.tags) {
      if (Array.isArray(STATE.pendingBlock.tags)) {
        tagsArray = STATE.pendingBlock.tags;
      } else if (typeof STATE.pendingBlock.tags === 'string') {
        tagsArray = STATE.pendingBlock.tags.split(',').map(t => t.trim()).filter(t => t);
      }
    }
    
    const blockData = {
      title: STATE.pendingBlock.title || 'ì—¬í–‰ ë¸”ë¡',
      description: STATE.pendingBlock.description || '',
      category: STATE.pendingBlock.category || 'ê´€ê´‘ì§€',
      location: STATE.pendingBlock.location || 'ì„œìš¸',
      price: parseFloat(STATE.pendingBlock.price) || 0.99,
      image_url: STATE.uploadedImage || 'https://images.unsplash.com/photo-1469854523086-cc02fe5d8800',
      creator_name: STATE.pendingBlock.creatorName || 'ì—¬í–‰ì',
      tags: tagsArray,
      tips: STATE.pendingBlock.description || '',
      rating: 0,
      purchase_count: 0,
      status: 'approved'
    };
    
    console.log('Sending block data:', blockData);
    
    const response = await fetch('tables/blocks', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(blockData)
    });

    if (response.ok) {
      const result = await response.json();
      console.log('Block created:', result);
      showToast('ğŸ‰ ë¸”ë¡ì´ ë§ˆì¼“ì— ë“±ë¡ëì–´ìš”!', 'success');

      // í¼ ë¦¬ì…‹
      document.getElementById('travelText').value = '';
      document.getElementById('creatorName').value = 'ì—¬í–‰ì';
      document.getElementById('uploadZone').innerHTML = `
        <div class="upload-icon w-16 h-16 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mx-auto mb-4 text-3xl">
          <i class="fa-solid fa-camera"></i>
        </div>
        <div class="upload-text">
          <p class="font-semibold text-gray-900 mb-2">ì‚¬ì§„ì„ ì—…ë¡œë“œí•˜ì„¸ìš”</p>
          <p class="text-sm text-gray-500">í´ë¦­í•˜ê±°ë‚˜ ë“œë˜ê·¸í•˜ì—¬ ì‚¬ì§„ ì¶”ê°€</p>
          <p class="text-xs text-gray-400 mt-2">JPG, PNG ìµœëŒ€ 5MB</p>
        </div>`;
      document.getElementById('uploadZone').classList.remove('border-green-400', 'bg-green-50');
      document.getElementById('uploadZone').classList.add('border-blue-200');
      document.getElementById('aiResult').style.display = 'none';
      document.getElementById('publishArea').style.display = 'none';
      STATE.uploadedImage = null;
      STATE.pendingBlock = null;

      setTimeout(() => {
        window.location.href = 'market.html';
      }, 1500);
    } else {
      const errorText = await response.text();
      console.error('Server response:', response.status, errorText);
      throw new Error(`ë“±ë¡ ì‹¤íŒ¨ (${response.status}): ${errorText}`);
    }
  } catch (error) {
    console.error('Error:', error);
    showToast(`ë“±ë¡ ì¤‘ ì˜¤ë¥˜: ${error.message}`, 'error');
  }
}

// Mock AI ë¶„ì„
function getMockAnalysis(text, creatorName) {
  const cats = ['ì¹´í˜','ìŒì‹ì ','ê´€ê´‘ì§€','ì‡¼í•‘','ì²´í—˜'];
  const locs = ['ì„±ìˆ˜ë™','í™ëŒ€','ëª…ë™','ê´‘ì¥ì‹œì¥','ê²½ë³µê¶ ê·¼ì²˜'];
  const cat = cats[Math.floor(Math.random()*cats.length)];
  const loc = locs[Math.floor(Math.random()*locs.length)];
  
  return {
    success: true,
    block: {
      title: `${loc} ${cat} ì‹¤ì œ ê²½í—˜`,
      description: text ? `${text.substring(0,100)}... AIê°€ ë¶„ì„í•œ í˜„ì§€ì¸ë§Œ ì•„ëŠ” íŠ¹ë³„í•œ ê³µê°„ì…ë‹ˆë‹¤.` : 'í˜„ì§€ì¸ë§Œ ì•„ëŠ” ìˆ¨ê²¨ì§„ ë§¤ë ¥ í¬ì¸íŠ¸!',
      location: loc,
      category: cat,
      price: parseFloat((Math.random() * 3 + 1).toFixed(2)),
      tags: ['ë¡œì»¬','ì¶”ì²œ','ì¸ìŠ¤íƒ€'],
      creatorName: creatorName
    }
  };
}

// í† ìŠ¤íŠ¸ ì•Œë¦¼
function showToast(message, type = 'success') {
  const container = document.getElementById('toastContainer');
  const toast = document.createElement('div');
  const bgColor = type === 'success' ? 'bg-green-500' : 'bg-red-500';
  const icon = type === 'success' ? 'check-circle' : 'exclamation-circle';
  
  toast.className = `${bgColor} text-white px-6 py-4 rounded-lg shadow-lg flex items-center gap-3 animate-slide-in`;
  toast.innerHTML = `
    <i class="fa-solid fa-${icon} text-xl"></i>
    <span>${message}</span>`;
  
  container.appendChild(toast);
  
  setTimeout(() => { 
    toast.style.opacity = '0'; 
    toast.style.transform = 'translateX(100px)';
    toast.style.transition = 'all 0.3s';
    setTimeout(() => toast.remove(), 300); 
  }, 3000);
}
</script>

<style>
@keyframes slide-in {
  from { opacity: 0; transform: translateX(100px); }
  to { opacity: 1; transform: translateX(0); }
}
.animate-slide-in { animation: slide-in 0.3s ease-out; }
</style>

<!-- ì¸ì¦ ì‹œìŠ¤í…œ í†µí•© -->
<script src="js/auth.js"></script>
<script>
// í˜ì´ì§€ ë¡œë“œ ì‹œ ë¡œê·¸ì¸ í™•ì¸ + í—¤ë” ì—…ë°ì´íŠ¸
window.addEventListener('DOMContentLoaded', () => {
    // ë¡œê·¸ì¸ í•„ìˆ˜ ì²´í¬
    requireLogin();
    
    // í—¤ë” ì‚¬ìš©ì ì •ë³´ ë Œë”ë§
    renderUserInHeader('authButtons');
    
    // ë¡œê·¸ì¸í•œ ì‚¬ìš©ì ì •ë³´ë¥¼ creator_nameì— ìë™ ì…ë ¥
    const user = getCurrentUser();
    if (user && user.nickname) {
        const creatorInput = document.querySelector('input[placeholder="ë‹‰ë„¤ì„ ì…ë ¥"]');
        if (creatorInput) {
            creatorInput.value = user.nickname;
            creatorInput.readOnly = true;
            creatorInput.classList.add('bg-gray-100');
        }
    }
});
</script>

</body>
</html>